<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Maps-Lec</title>
</head>

<!---- MapBOX CDN ----->

<script src='https://api.mapbox.com/mapbox-gl-js/v2.1.1/mapbox-gl.js'></script>
<link href='https://api.mapbox.com/mapbox-gl-js/v2.1.1/mapbox-gl.css' rel='stylesheet' />
<script src="js/mapbox-geocoder-utils.js"></script>

<!---- FONTS ---->

<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Orelega+One&display=swap" rel="stylesheet">

<style>
    body {
        background: linear-gradient(to right, #b20d14, #bf212a);
    }
    .map{
        display: flex;
        justify-content: center;
        align-items: center;
        width:100%;
    }

    #map{
        width:100%;
        height:700px;
        box-shadow: 2px 2px 0px 0px #565454;
    }
    h1 {
        display: flex;
        justify-content: center;
        text-align: center;
        font-size: 18px;
    }
    .text-box {
        display: flex;
        justify-content: flex-end;
        font-family: 'Orelega One', cursive;
        color:#afd3c1;
        text-shadow: 2px 2px #565454;

    }


</style>

<script src="js/keys.js"></script>



<body>
<div class="container">
    <!-- code here -->
    <div class="text-box">
        <h1>üçî Tims Food Picks üåÆ</h1>
    </div>
</div>
<div class="map">
    <div id='map' style='width: 100%; height: 600px;'></div>
</div>
    <script>
        mapboxgl.accessToken = mapboxtoken;
        var map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/streets-v11',
            center: [-98.48, 29.45],
            zoom:10,
        });


        //Yes we can set the zoom after the map is drawn
        //map.setZoom(20);

        // geocode("1414 S Alamo St, San Antonio, TX 78210", mapboxtoken).then(function(results){
        //     console.log("Restaurant coordinates", results);
        //     var marker = new mapboxgl.Marker()
        //         .setLngLat(results)
        //         .setPopup(new mapboxgl.Popup({ offset: 25 })
        //         .setHTML('<a>Halcyon</a>'))
        //         .addTo(map)
        //
        // })

        //
        // geocode("701 S St Mary's St, San Antonio, TX 78204", mapboxtoken).then(function(results){
        //     console.log("Restaurant coordinates", results);
        //     var marker = new mapboxgl.Marker()
        //         .setLngLat(results)
        //         .setPopup(new mapboxgl.Popup({ offset: 25 })
        //             .setHTML('<a>Filling Station</a>'))
        //         .addTo(map);
        // })

        //
        //
        // geocode("4025 Broadway, San Antonio, TX 78209", mapboxtoken).then(function(results){
        //     console.log("Restaurant coordinates", results);
        //     var marker = new mapboxgl.Marker()
        //         .setLngLat(results)
        //         .setPopup(new mapboxgl.Popup({ offset: 25 })
        //             .setHTML('<a>Hayden</a>'))
        //         .addTo(map);
        //
        // })

        var favFoods =
            [{
                name: "The Hayden",
                addr: "4025 Broadway, San Antonio, TX 78209",
                contents: "<a>The Hayden</a>",
            },
             {
                name: "filling station",
                addr: "701 S St Mary's St, San Antonio, TX 78204",
                contents: "<a>The Filling Station</a>",
            },
          {
                name: "Halcyon",
                addr: "1414 S Alamo St, San Antonio, TX 78210",
                contents: "<a>Halcyon</a>",
            }]

        console.log(favFoods);
        for (var i = 0; i < favFoods.length; i++){
            console.log(favFoods[i])
            var favfoodContents = favFoods[i].contents;
            geocode(favFoods[i].addr, mapboxtoken).then(function(results){
                console.log("Restaurant coordinates", results);
                var marker = new mapboxgl.Marker()
                    .setLngLat(results)
                    .setPopup(new mapboxgl.Popup({ offset: 25 })
                        .setHTML(favfoodContents))
                    .addTo(map);

            })
        }



    </script>

</body>
</html>